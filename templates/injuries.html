{% extends "base.html" %}
{% block title %}Injury Report{% endblock %}

{% block content %}
<div class="injury-container">
  <h2 class="page-title">Injury Reports ({{ total_count }})</h2>

  {% if total_count > 0 and total_pages > 1 %}
  <div class="injury-pager">
    {% if page > 1 %}
      <a class="injury-btn-pager" href="{{ url_for('views.injuries', page=page-1) }}">&larr; Previous</a>
    {% else %}
      <span class="injury-btn-pager disabled">&larr; Previous</span>
    {% endif %}

    <div class="injury-pager-center">
      <span class="injury-muted">Page {{ page }} of {{ total_pages }}</span>
      <span class="injury-muted">‚Ä¢</span>
      <span class="injury-muted">Showing {{ showing_start }}‚Äì{{ showing_end }}</span>
    </div>

    {% if page < total_pages %}
      <a class="injury-btn-pager" href="{{ url_for('views.injuries', page=page+1) }}">Next &rarr;</a>
    {% else %}
      <span class="injury-btn-pager disabled">Next &rarr;</span>
    {% endif %}
  </div>
  {% endif %}

  {% if injuries %}
    {% for item in injuries %}
      <div class="injury-card">
        <div class="injury-top">
          {% if item.logo_url %}
            <img src="{{ item.logo_url }}" alt="Team Logo" class="team-logo">
          {% else %}
            <div class="team-logo placeholder" title="Team unknown">üèà</div>
          {% endif %}
          <div class="player-meta">
            <h2 class="player-name">
              {{ item.player_name or item.name or item.player }}
              {% if item.position %}<span class="position">{{ item.position }}</span>{% endif %}
              {% if item.status %}<span class="badge">{{ item.status }}</span>{% endif %}
            </h2>
          </div>
        </div>

        {% if item.date %}
          <div class="injury-description"><strong>Reported:</strong> {{ item.date }}</div>
        {% endif %}
        {% if item.headline %}
          <div class="injury-description"><strong>{{ item.headline }}</strong></div>
        {% endif %}
        {% if item.description %}
          <div class="injury-comment">{{ item.description }}</div>
        {% endif %}
        {% if item.fantasy_impact %}
          <div class="injury-comment"><em>{{ item.fantasy_impact }}</em></div>
        {% endif %}
      </div>
    {% endfor %}
  {% else %}
    <div class="injury-card">
      <strong>No injury items found.</strong>
      <div class="injury-description">
        If this seems wrong, try increasing the crawl depth with <code>?pages=150</code>.
      </div>
    </div>
  {% endif %}

  {% if total_count > 0 and total_pages > 1 %}
  <div class="injury-pager">
    {% if page > 1 %}
      <a class="injury-btn-pager" href="{{ url_for('views.injuries', page=page-1) }}">&larr; Previous</a>
    {% else %}
      <span class="injury-btn-pager disabled">&larr; Previous</span>
    {% endif %}
    <div class="injury-pager-center">
      <span class="injury-muted">Page {{ page }} of {{ total_pages }}</span>
      <span class="injury-muted">‚Ä¢</span>
      <span class="injury-muted">Showing {{ showing_start }}‚Äì{{ showing_end }}</span>
    </div>
    {% if page < total_pages %}
      <a class="injury-btn-pager" href="{{ url_for('views.injuries', page=page+1) }}">Next &rarr;</a>
    {% else %}
      <span class="injury-btn-pager disabled">Next &rarr;</span>
    {% endif %}
  </div>
  {% endif %}
</div>
{% endblock %}
